{% load mustache %}
{% load straight_include %}
{% load verbatim %}

<!doctype html>
<html lang="en">
  <head>
    <title>Django + Backbone.js</title>

    {% block meta %}

    {% endblock %}

    {% block extra_css %}

    {% endblock %}

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script src="{{ STATIC_URL }}js/underscore-min.js"></script>
    <script src="{{ STATIC_URL }}js/backbone-min.js"></script>
    <script src="{{ STATIC_URL }}js/backbone-tastypie.js"></script>
    <script src="{{ STATIC_URL }}js/ICanHaz.min.js"></script>
    {% block extra_js_libraries %}

    {% endblock %}

    <script>
      TWEET_API = "{% url api_dispatch_list api_name="v1" resource_name="tweet" %}";
      {% if data %}
      app = {loaded: true};
      {% endif %}
    </script>
    <script src="{{ STATIC_URL }}js/app.js"></script>

    <script type="text/html" id="tweetTemplate">
      {% straight_include "tweetTemplate.mustache" %}
    </script>

    <script type="text/html" id="listApp">
      {% straight_include "listApp.mustache" %}
    </script>

    <script type="text/html" id="detailApp">
      {% straight_include "detailApp.mustache" %}
    </script>

    {% if users_and_groups %}
    <script type="text/html" id="usersAndGroupsSelect">
      <select multiple="multiple" class="perms"{% verbatim %} data-perm-type="{{perm}}"{% endverbatim %}>
        {% mustache "usersAndGroupsSelect" users_and_groups %}
      </select>
    </script>
    {% endif %}

  </head>

  <body>

  {% block body %}

  {% endblock %}

  </body>
</html>
